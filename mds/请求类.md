```java
package com.immomo.d;

import android.text.TextUtils;
import com.cosmos.mdlog.MDLog;
import com.immomo.mmutil.i;
import com.immomo.momo.brotlij.exception.BrotliException;
import com.immomo.momoenc.e;
import com.immomo.momoenc.exception.AesDecodeFaildException;
import com.immomo.momoenc.exception.AesEncodeFaildException;
import com.immomo.momoenc.exception.EmptyEncKeyException;
import com.immomo.momoenc.exception.ExchangeKeyFinishException;
import com.immomo.momoenc.exception.RepostWithTokenException;
import com.immomo.momoenc.g;
import com.loopj.android.http.RequestParams;
import java.io.File;
import java.io.IOException;
import java.lang.reflect.Field;
import okhttp3.Interceptor;
import okhttp3.MediaType;
import okhttp3.MultipartBody;
import okhttp3.Request;
import okhttp3.RequestBody;
import okhttp3.Response;
import okhttp3.ResponseBody;

/* loaded from: classes22-dex2jar.jar:com/immomo/d/a.class */
public abstract class a implements Interceptor {

    /* renamed from: a, reason: collision with root package name */
    static final boolean f11016a = !a.class.desiredAssertionStatus();

    /* JADX WARN: Code restructure failed: missing block: B:37:0x013b, code lost:
    
        if ("PATCH".equalsIgnoreCase(r6.method()) != false) goto L25;
     */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Type inference failed for: r7v0, types: [com.immomo.momoenc.e] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct code enable 'Show inconsistent code' option in preferences
    */
    private okhttp3.Request a(okhttp3.Request r6, com.immomo.momoenc.e r7) throws java.lang.Exception {
        /*
            Method dump skipped, instructions count: 1015
            To view this dump change 'Code comments level' option to 'DEBUG'
        */
        throw new UnsupportedOperationException("Method not decompiled: com.immomo.d.a.a(okhttp3.Request, com.immomo.momoenc.e):okhttp3.Request");
    }

    private Response a(String str, Interceptor.Chain chain, int i) throws Exception {
        int i2 = i + 1;
        Request request = chain.request();
        Request request2 = request;
        Request request3 = request;
        Request request4 = request;
        Request request5 = request;
        Request request6 = request;
        Request request7 = request;
        try {
            e eVar = new e(str, a(str) ? 3 : 0);
            Request a2 = a(request, eVar);
            request2 = a2;
            request3 = a2;
            request4 = a2;
            request5 = a2;
            request6 = a2;
            request7 = a2;
            return a(chain.proceed(a2), eVar);
        } catch (BrotliException e) {
            a("api_brotli_depress_error", str, request7.method(), e.toString());
            a(i2, e);
            return a(str, chain, i2);
        } catch (AesDecodeFaildException e2) {
            a("api_aes_decode_error", str, request5.method(), e2.toString());
            a(i2, e2);
            return a(str, chain, i2);
        } catch (AesEncodeFaildException e3) {
            a("api_aes_encode_error", str, request6.method(), e3.toString());
            a(i2, e3);
            return a(str, chain, i2);
        } catch (EmptyEncKeyException e4) {
            a("api_empty_enc_key_error", str, request4.method(), e4.toString());
            a(i2, e4);
            return a(str, chain, i2);
        } catch (ExchangeKeyFinishException e5) {
            a("api_exchange_key_finish_error", str, request3.method(), e5.toString());
            a(i2, e5);
            return a(str, chain, i2);
        } catch (RepostWithTokenException e6) {
            a("api_repost_with_token_error", str, request2.method(), e6.toString());
            a(i2, e6);
            return a(str, chain, i2);
        }
    }

    private Response a(Response response, e eVar) throws Exception {
        if (!f11016a && response.body() == null) {
            throw new AssertionError();
        }
        MediaType contentType = response.body().contentType();
        if (contentType != null && ("audio".equalsIgnoreCase(contentType.type()) || "image".equalsIgnoreCase(contentType.type()) || "video".equalsIgnoreCase(contentType.type()))) {
            return response;
        }
        String a2 = eVar.a(new g(response.headers().toMultimap(), response.body().bytes()));
        String str = a2;
        if (TextUtils.isEmpty(a2)) {
            str = "";
        }
        return response.newBuilder().body(ResponseBody.create(contentType, str)).build();
    }

    private void a(int i, Exception exc) throws Exception {
        if (i > a()) {
            throw exc;
        }
    }

    private boolean a(MultipartBody.Part part) {
        RequestBody body = part.body();
        MediaType contentType = body.contentType();
        if (contentType == null) {
            return false;
        }
        String mediaType = contentType.toString();
        boolean z = -1;
        switch (mediaType.hashCode()) {
            case -1487394660:
                if (mediaType.equals("image/jpeg")) {
                    z = 2;
                    break;
                }
                break;
            case -1082243251:
                if (mediaType.equals("text/html")) {
                    z = 8;
                    break;
                }
                break;
            case -1004727243:
                if (mediaType.equals("text/xml")) {
                    z = 9;
                    break;
                }
                break;
            case -879267568:
                if (mediaType.equals("image/gif")) {
                    z = 6;
                    break;
                }
                break;
            case -879264467:
                if (mediaType.equals("image/jpg")) {
                    z = true;
                    break;
                }
                break;
            case -879258763:
                if (mediaType.equals("image/png")) {
                    z = false;
                    break;
                }
                break;
            case -43840953:
                if (mediaType.equals(RequestParams.APPLICATION_JSON)) {
                    z = 11;
                    break;
                }
                break;
            case 187091926:
                if (mediaType.equals("audio/ogg")) {
                    z = 4;
                    break;
                }
                break;
            case 817335912:
                if (mediaType.equals("text/plain")) {
                    z = 10;
                    break;
                }
                break;
            case 1178484637:
                if (mediaType.equals("application/octet-stream")) {
                    z = 7;
                    break;
                }
                break;
            case 1331848029:
                if (mediaType.equals("video/mp4")) {
                    z = 5;
                    break;
                }
                break;
            case 1504831518:
                if (mediaType.equals("audio/mpeg")) {
                    z = 3;
                    break;
                }
                break;
        }
        switch (z) {
            case false:
            case true:
            case true:
            case true:
            case true:
            case true:
            case true:
            case true:
                return true;
            case true:
            case true:
            case true:
            case true:
                return false;
            default:
                for (Field field : body.getClass().getDeclaredFields()) {
                    if (field.getType().equals(File.class)) {
                        return true;
                    }
                }
                return false;
        }
    }

    protected int a() {
        return 3;
    }

    protected void a(String str, String str2, String str3, String str4) {
    }

    protected abstract boolean a(String str);

    protected abstract boolean b(String str) throws IOException;

    @Override // okhttp3.Interceptor
    public Response intercept(Interceptor.Chain chain) throws IOException {
        Request request = chain.request();
        String httpUrl = request.url().toString();
        String str = httpUrl;
        if (i.a(request.url().host())) {
            String header = request.header("Host");
            str = httpUrl;
            if (!TextUtils.isEmpty(header)) {
                if (!f11016a && header == null) {
                    throw new AssertionError();
                }
                str = request.url().newBuilder().host(header).build().toString();
            }
        }
        if (!b(str)) {
            return chain.proceed(request);
        }
        try {
            return a(str, chain, 0);
        } catch (IOException e) {
            throw e;
        } catch (Exception e2) {
            MDLog.printErrStackTrace("MOMOHttp", e2);
            throw new IOException("[api encryption or decryption failed] url:" + str, e2);
        }
    }
}
```